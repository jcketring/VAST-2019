index = (totalData$location - 1)*10 + totalData[column]
}
score <- matrix(nrow = n_locations*10, ncol = 1)
location <- matrix(nrow = n_locations*10, ncol = 1)
total <- matrix(nrow = n_locations*10, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:10){
location[k] <- i
score[k] <- j
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[,column])==FALSE){
index = (totalData$location - 1)*10 + totalData[,column]
total[index] = total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
k = k + 1
}
}
heatdata <- data.frame(location, score, total)
type = "Sewer and Water"
column = 2
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
total[index] = total[index] + 1
}
}
}
heatdata <- data.frame(location, score, total)
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
total[index] = total[index] + 1
}
}
}
heatdata <- data.frame(location, score, total)
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
total[index] <- total[index] + 1
}
}
}
heatdata <- data.frame(location, score, total)
total[5]
is.na(total[80])
is.na(total[66])
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
`+`(total[index]) <- 1
}
}
}
heatdata <- data.frame(location, score, total)
#Set which type to make csv for
type = "Sewer and Water"
column = 2
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
heatdata <- data.frame(location, score, total)
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
print(x)
total[index] <- x
}
}
}
heatdata <- data.frame(location, score, total)
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
if(is.na(x)) {
print(x)
}
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
if(is.na(x)) {
print(x)
} else if (is.na(total[index])){
print("pppppppp")
}
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index,])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index,1])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
is.na(total[index,1]
)
is.na(total[index])
is.na(total[1])
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
print(index)
if (is.na(total[index,1])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index = (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index,1])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location - 1)*11 + totalData[,column]
if (is.na(total[index,1])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
totalData[,column]
totalData[1,column]
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
if (is.na(total[index])){
total[index] <- 1
} else {
x = total[index] + 1
total[index] <- x
}
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
type = "Sewer and Water"
column = 2
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
#Set which type to make csv for
filename = "sewer.csv"
column = 2
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#Set which type to make csv for
filename = "power.csv"
column = 3
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#------------------------------------------------------------------------------------------------------------
#Set which type to make csv for
filename = "roads.csv"
column = 4
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
filename = "medical.csv"
column = 5
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#------------------------------------------------------------------------------------------------------------
#Set which type to make csv for
filename = "buildings.csv"
column = 6
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#filter out to have one day at a time
#------------------------------------------------------------------------------------------------------------
totalData$time <- ymd_hms(totalData$time)
oneDayData <- totalData %>%
mutate(date_cutoff = as.POSIXct(date(min(time)) + days(1))) %>%
filter(time < date_cutoff)
twoDayData <- totalData %>%
mutate(date_cutoff = as.POSIXct(date(min(time)) + days(2))) %>%
filter(time < date_cutoff)
threeDayData <- totalData %>%
mutate(date_cutoff = as.POSIXct(date(min(time)) + days(3))) %>%
filter(time < date_cutoff)
#Choose data set to use
totalData <- threeDayData
#split data into data frames for each location
divData<-split(totalData, totalData$location, drop = TRUE)
#Make heat map csv
#------------------------------------------------------------------------------------------------------------
#Set which type to make csv for
filename = "sewer2.csv"
column = 2
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#------------------------------------------------------------------------------------------------------------
#Set which type to make csv for
filename = "power2.csv"
column = 3
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
#Set which type to make csv for
filename = "roads2.csv"
column = 4
#create empty vectors to populate
score <- matrix(nrow = n_locations*11, ncol = 1)
location <- matrix(nrow = n_locations*11, ncol = 1)
total <- matrix(nrow = n_locations*11, ncol = 1)
k = 1
for(i in 1:n_locations){
for(j in 1:11){
location[k] <- i
score[k] <- j - 1
total[k] <- 0
k = k + 1
}
}
for(i in 1:nrow(totalData)) {
if(is.na(totalData[i,column])==FALSE){
index <- (totalData$location[i] - 1)*11 + totalData[i,column]
total[index] <- total[index] + 1
}
}
heatdata <- data.frame(location, score, total)
write.csv(heatdata, file = filename)
